<!DOCTYPE html>
<html>
<head>
    <title>Skill ID Parsing Fix Demo</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
        .section { margin: 20px 0; padding: 15px; background: #252526; border-radius: 5px; }
        h2 { color: #4ec9b0; }
        .test-case { margin: 10px 0; padding: 10px; background: #2d2d30; border-left: 3px solid #007acc; }
        .input { color: #ce9178; }
        .output { color: #b5cea8; }
        .code { background: #1e1e1e; padding: 10px; border-radius: 3px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üõ†Ô∏è Fix: Defensive Skill ID Parsing</h1>
    
    <div class="section">
        <h2>Problem</h2>
        <div class="code">
            <code>skill.split('/')[1]</code> returns <code>undefined</code> when skill ID has no '/'
        </div>
    </div>

    <div class="section">
        <h2>Solution</h2>
        <div class="code">
            <code>skill.split('/')[1] ?? skill</code> - uses nullish coalescing to fallback to full skill ID
        </div>
    </div>

    <div class="section">
        <h2>Test Cases</h2>
        <div id="tests"></div>
    </div>

    <script>
        const testCases = [
            { input: 'anthropics/mcp-builder', desc: 'Normal case (provider/skill)' },
            { input: 'skill-without-provider', desc: 'Edge case (no slash)' },
            { input: 'multi/slash/path', desc: 'Edge case (multiple slashes)' },
            { input: '', desc: 'Edge case (empty string)' }
        ];

        const testsDiv = document.getElementById('tests');
        testCases.forEach(test => {
            const oldResult = test.input.split('/')[1];
            const newResult = test.input.split('/')[1] ?? test.input;
            
            const div = document.createElement('div');
            div.className = 'test-case';
            div.innerHTML = `
                <strong>${test.desc}</strong><br>
                <span class="input">Input: "${test.input}"</span><br>
                Old code: <code>split('/')[1]</code> = <span style="color: ${oldResult === undefined ? '#f48771' : '#b5cea8'}">"${oldResult}"</span><br>
                New code: <code>split('/')[1] ?? input</code> = <span class="output">"${newResult}"</span> ‚úì
            `;
            testsDiv.appendChild(div);
        });
    </script>
</body>
</html>
